



<div class="max-w-sm mx-auto p-6 bg-gray-900 rounded-2xl shadow-lg text-white space-y-6">
  <!-- Token Swap Section -->
  <div class="space-y-4">
    <!-- From Token (Editable) -->
    <div class="flex items-center justify-between p-4 bg-gray-800 rounded-xl">
      <div class="flex items-center space-x-2">
        <div (click)="openPopup('fromTokenSelector')" class="relative">
          <img [src]="combination.sourceNetwork.logo" alt="USDT" class="w-8 h-8 rounded-full" />
          <img [src]="combination.sourceToken.icon_url" alt="BSC" class="w-4 h-4 absolute bottom-[-6px] right-[-8px] rounded-full " />
        </div>
        <span class="text-lg font-semibold">{{combination.sourceToken.token_symbol}}</span>
      </div>
      <div class="text-right">
        <input
          type="number"
          [value]="combination.amount"
          (change)='updateAmount($event)'
          class="bg-transparent text-xl font-bold text-right w-24 focus:outline-none"
        />
        <div class="text-sm text-gray-400">{{getTokensUsdPrice('from',combination.sourceToken,combination.amount)|number:'1.0-2'}} $</div>
      </div>
    </div>

    <!-- To Token (Read-only) -->
    <div class="flex items-center justify-between p-4 bg-gray-800 rounded-xl">
      <div class="flex items-center space-x-2">
        <div (click)="openPopup('toTokenSelector')" class="relative">
          <img [src]="combination.destinationNetwork.logo" alt="BNB" class="w-8 h-8 rounded-full" />
          <img [src]="combination.destinationToken.icon_url" alt="BSC" class="w-4 h-4 absolute bottom-[-6px] right-[-8px] rounded-full " />
        </div>
        <span class="text-lg font-semibold">{{combination.destinationToken.token_symbol}}</span>
      </div>
      <div class="text-right">
        <div class="text-xl font-bold">{{activeQuote.toAmount|number:'1.0-4'}}</div>
        <div class="text-sm text-gray-400">{{getTokensUsdPrice('to',combination.destinationToken,activeQuote.toAmount)|number:'1.1-2'}} $</div>
      </div>
    </div>
  </div>

  <!-- Recipient Address Input -->
  <div class="space-y-2">
    <label for="recipient" class="text-sm text-gray-300">Recipient Address</label>
    <input
      type="text"
      id="recipient"
      placeholder="Enter recipient wallet address"
      [(value)]="recipientAddress"
      (blur)="updateRecipientAddress($event)"
      class="w-full p-3 bg-gray-800 text-white rounded-xl placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-yellow-400"
    />
  </div>

  <!-- Price Details -->
  <div *ngIf="!activeQuote.err" class="text-sm text-gray-300 space-y-2">
    <div class="flex justify-between">
      <span>Min Received</span>
      <span class="text-white font-medium">{{activeQuote?.additionalInfo?.minRecieved|number:'1.2-3'}} {{!activeQuote.additionalInfo.minRecieved?'Market Price':activeQuote.toTokenInfo.token_symbol}}</span>
    </div>
    <div class="flex justify-between">
      <span>Difference</span>
      <span class="text-white font-medium">{{ getNegativeValue(activeQuote?.additionalInfo?.priceImpactWithoutGasFee) ? '' : '+'}}{{ getNegativeValue(activeQuote?.additionalInfo?.priceImpactWithoutGasFee) | number:'0.1-1'}}%</span>
    </div>
    <div class="flex justify-between">
      <span> 1 {{ activeQuote?.toTokenInfo?.token_symbol }} <span *ngIf="!isBridge(activeQuote)">BUY</span> <span *ngIf="isBridge(activeQuote)">AVG.</span> PRICE</span>
      <span class="text-white font-medium">  ~ ${{ activeQuote?.additionalInfo?.avgPrice['to'] |  number:'1.0-4'}}</span>
    </div>
    <div class="flex justify-between">
      <span> 1 {{ activeQuote?.fromTokenInfo?.token_symbol }} Sell Price</span>
      <span class="text-white font-medium"> ~ ${{ activeQuote?.additionalInfo?.avgPrice['from'] |  number:'1.0-4'}}</span>
    </div>
  </div>

  <!-- Buy Button -->
  <button [disabled]="recipientAddress.length===0 && buttonName==='Swap'" (click)="buttonClicked()" [ngClass]="recipientAddress.length===0 && buttonName=='Swap'?'cursor-not-allowed':'cursor-pointer'" class="w-full  py-3 bg-yellow-400 hover:bg-yellow-300 text-black font-semibold rounded-xl transition duration-200">
    {{this.buttonName}}
  </button>
</div>

